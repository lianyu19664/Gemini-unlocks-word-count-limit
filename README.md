---

# Gemini 输入框增强脚本 (字数解除 + 智能回车)

这是一个基于 **Tampermonkey (油猴)** 开发的脚本，专门用于优化 Gemini 网页版的输入体验。它解决了原生输入框在大段文字粘贴时的截断问题，并优化了发送后的清空逻辑。

## 🚀 主要功能

### 1. 彻底解除字数限制

* **原理**：通过拦截并重写底层 `Quill.js` 引擎的 `insertAt` 和 `deleteAt` 原型方法，阻止系统对超长文本执行自动截断。[点击下载](https://greasyfork.org/zh-CN/scripts/561665/versions/new)
* **特性**：
* 支持无限长度的文本输入与粘贴。
* 绕过前端 UI 层的字数校验（如 4000 字限制）。
* 保持后端 API 发送的完整性。



### 2. 智能回车 (Enter) 逻辑

* **纯 Enter**：发送消息后自动清空输入框内容。
* **组合键 (Shift/Ctrl + Enter)**：正常换行，不会触发清空。
* **自拦截优化**：脚本能自动识别“手动清空”与“系统截断”，确保清空操作不会被自身的防御逻辑拦截。

### 3. 安全与兼容性

* **TrustedHTML 兼容**：使用原生 API 操作，避开了浏览器对 `innerHTML` 的安全拦截。
* **无感运行**：脚本在页面加载时自动注入，无需手动干预。

---

## 🛠️ 安装与使用

1. 确保浏览器已安装 [Tampermonkey](https://www.tampermonkey.net/) 插件。
2. 点击插件图标，选择 **“添加新脚本”**。
3. 将脚本代码完整粘贴到编辑器中并保存（Ctrl + S）。
4. 刷新 `gemini.google.com` 页面即可生效。

## ⚠️ 注意事项

* **API 限制**：虽然脚本解除了前端 UI 的限制，但如果 Google 服务器后端对单次请求有硬性的长度限制（如超过数十万字），可能会导致请求报错（400 Bad Request）。
* **仅限个人调试**：本脚本仅用于个人研究与提升输入体验，请勿用于违反平台服务协议的行为。
* **性能降低**: 本脚本会显著降低网页流畅度，请知悉。

---
